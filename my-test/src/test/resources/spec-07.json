[
  {
    "operation": "shift",
    "spec": {
      "books": {
        "*": {
          "availability": {
            // match all elements of the availability array
            "*": {
              // if the word paperback exists match it
              "paperback": {
                // Look up the tree 3 levels, then back down and grab the value for the "title"
                // and write it to PaperBacks in the output
                "@(3,title)": "PaperBacks"
              },
              // if the word online exists match it
              "online": {
                // Look up the tree 3 levels, then back down and grab the value for the "title"
                // and write it to Online in the output
                "@(3,title)": "Online"
              }
            }
          }
        }
      }
    }
  }
]
